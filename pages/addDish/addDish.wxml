<view class="container">
  <!-- 表单容器 -->
  <form bindsubmit="formSubmit" class="dish-form">
    <!-- 菜品分类选择 -->
    <view class="form-item">
      <view class="form-label">菜品分类</view>
      <picker 
        mode="selector" 
        value="{{typeIndex}}" 
        range="{{typeList}}" 
        range-key="title"
        bindchange="bindTypeChange"
        class="form-picker"
      >
        <view class="picker-placeholder">{{typeIndex !== null ? typeList[typeIndex].title : '请选择菜品分类'}}</view>
      </picker>
    </view>

    <!-- 菜品名称输入 -->
    <view class="form-item">
      <view class="form-label">菜品名称</view>
      <input 
        class="form-input" 
        name="title" 
        placeholder="请输入菜品名称" 
        value="{{dishTitle}}"
        bindinput="onTitleChange"
        required
      />
    </view>

    <!-- 菜品图片上传 -->
    <view class="form-item">
      <view class="form-label">菜品图片</view>
      <view class="upload-container">
        <!-- 已上传图片预览 -->
        <view class="image-preview">
          <block wx:for="{{image.url}}" wx:key="index">
            <view class="image-item">
              <image src="{{item.url}}" mode="aspectFill"></image>
              <icon 
                type="clear" 
                size="20" 
                class="delete-icon"
                bindtap="deleteImage" 
                data-index="{{index}}"
              ></icon>
            </view>
          </block>
          
          <!-- 上传上传按钮 -->
          <view 
            class="upload-btn" 
            bindtap="chooseImage"
            wx:if="{{image.url.length < 3}}"
          >
            <icon type="add" size="30"></icon>
            <text>上传图片</text>
          </view>
        </view>
        <view class="upload-hint">最多上传3张图片</view>
      </view>
    </view>

    <!-- 提交按钮 -->
    <button 
      form-type="submit" 
      class="submit-btn"
      disabled="{{!canSubmit}}"
    >
      保存菜品
    </button>
  </form>
</view>
